(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,t,a){e.exports=a(80)},48:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(36),s=a.n(o),l=(a(48),a(9)),i=a(10),c=a(12),u=a(11),d=a(13),m=a(7),p=a(19),h=a(5),f=a(23),v=a.n(f),g=a(1),w=a.n(g),b=function(e){e?w.a.defaults.headers.common.Authorization=e:delete w.a.defaults.headers.common.Authorization},E=a(17),y=a(38),C=a(20),N=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},O={isAuthenticated:!1,user:{}},S={},j={profile:null,profiles:null,loading:!1},R=Object(E.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(C.a)({},e,{isAuthenticated:!N(t.payload),user:t.payload});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE_LOADING":return Object(C.a)({},e,{loading:!0});case"GET_PROFILE":return Object(C.a)({},e,{profile:t.payload,loading:!1});case"CLEAR_CURRENT_PROFILE":return Object(C.a)({},e,{profile:null});default:return e}}}),k=[y.a],_=Object(E.e)(R,{},Object(E.d)(E.a.apply(void 0,k),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e})),P=function(e){return{type:"SET_CURRENT_USER",payload:e}},U=function(){return function(e){localStorage.removeItem("jwtToken"),b(!1),e(P({}))}},A=function(){return{type:"PROFILE_LOADING"}},I=function(){return{type:"CLEAR_CURRENT_PROFILE"}},F=a(39),D=Object(h.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(F.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/login"})}}))}),T=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"render",value:function(){return r.a.createElement("div",{className:"landing"},r.a.createElement("div",{className:"landing-inner text-light"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("h1",{className:"display-3 mb-4"},r.a.createElement("strong",null,"Cool Hands")),r.a.createElement("p",{className:"lead"}," ","Create a profile, and get stuff delivered today!"),r.a.createElement("hr",null),r.a.createElement(m.b,{to:"/register",className:"btn btn-lg btn-primary mr-2"},"Sign Up"),r.a.createElement(m.b,{to:"/login",className:"btn btn-lg btn-light"},"Login"))))))}}]),t}(n.Component),L=Object(h.b)(function(e){return{auth:e.auth}})(T),x=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"onLogoutClick",value:function(e){e.preventDefault(),this.props.clearCurrentProfile(),this.props.logoutUser()}},{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,a=e.user,n=r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/dashboard",className:"nav-link"},a.displayname+"'s Profile: ",r.a.createElement("img",{className:"rounded-circle",src:a.profilePic||"https://picsum.photos/250/?random",alt:a.displayname,style:{width:"25px",marginRight:"5px"},title:a.username}))),r.a.createElement("li",null,r.a.createElement("a",{href:"/",onClick:this.onLogoutClick.bind(this),className:"nav-link logout"}," ",r.a.createElement("strong",null,"Logout")))),o=r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{className:"nav-link",to:"/register"},"Sign Up")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{className:"nav-link",to:"/login"},r.a.createElement("strong",null,"Login"))));return r.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark mb-4"},r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{className:"navbar-brand",to:"/"},"Cool Hands Couriers"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#mobile-nav"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"mobile-nav"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{className:"nav-link",to:"/profiles"},"Orders")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{className:"nav-link",to:"/search"},"Search"))),t?n:o)))}}]),t}(n.Component),M=Object(h.b)(function(e){return{auth:e.auth}},{logoutUser:U,clearCurrentProfile:I})(x),z=a(18),G=a(42),Z=a.n(G),H=function(e){var t=e.name,a=e.placeholder,n=e.value,o=e.error,s=e.info,l=e.type,i=e.onChange,c=e.disabled;return r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:l,className:Z()("form-control form-control-lg",{"is-invalid":o}),placeholder:a,name:t,value:n,onChange:i,disabled:c}),s&&r.a.createElement("small",{className:"form-text text muted"},s),o&&r.a.createElement("div",{className:"invalid-feedback"},o))};H.defaultProps={type:"text"};var X=H,$={queryRestaurants:function(e){return w.a.put("/api/query",e)},getfollowers:function(e){return w.a.put("/api/followers/",e)},followUser:function(e){return w.a.post("/api/followers/",e)},addRestaurant:function(e){return w.a.post("/api/restaurants",e)},getRestaurants:function(e){return w.a.put("/api/restaurants",e)},addReview:function(e){return w.a.post("/api/reviews",e)},getReviews:function(e){return w.a.put("/api/reviews",e)},deleteReview:function(e){return w.a.delete("/api/reviews/"+e)},deleteRestaurant:function(e){return w.a.delete("/api/restaurants/"+e)},updateReview:function(e){return w.a.put("/api/reviews/"+e._id,e)},updateRestaurant:function(e){return w.a.put("/api/restaurants/"+e._id,e)},updateUser:function(e){return w.a.put("/api/users/"+e._id,e)},getUsers:function(e){return w.a.put("/api/users/",e)},getOneUser:function(e){return w.a.get("/api/users/"+e._id)},deleteFollower:function(e){return w.a.delete("/api/followers/"+e)},autocomplete:function(e){return w.a.post("/api/autocomp",e)},geocode:function(e){return w.a.post("/api/geocode",e)},addFollower:function(e){return w.a.post("/api/followers",e)},searchId:function(e){return w.a.put("/api/searchId",e)}},V=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",displayname:"",email:"",password:"",password2:"",city:"",stateName:"",profilePic:"",errors:{},modalState:"hide-modal",message:""},a.onChange=function(e){if(e.preventDefault(),"username"===e.target.name?/^([a-zA-Z0-9]){0,15}$/.test(e.target.value)&&a.setState(Object(z.a)({},e.target.name,e.target.value)):a.setState(Object(z.a)({},e.target.name,e.target.value)),"username"===e.target.name)$.getUsers({username:e.target.value}).then(function(e){if(e.data.length>0){var t=a.state.errors;t.username="Username unavailable",a.setState({errors:t})}else{var n=a.state.errors;n.username="",a.setState({errors:n})}});else if("password"===e.target.name)if(/^([a-zA-Z0-9-_]){0,15}$/.test(e.target.value)){var t=a.state.errors;t.password="",a.setState({errors:t})}else{var n=a.state.errors;n.password="Invalid Characters. Use Only: a-z, A-Z, 0-9, '_', '-'",a.setState({errors:n})}else if("password2"===e.target.name)if(/^([a-zA-Z0-9-_]){0,15}$/.test(e.target.value))if(e.target.value.length>0&&e.target.value!==a.state.password){var r=a.state.errors;r.password2="Passwords do not match",a.setState({errors:r})}else{var o=a.state.errors;o.password2="",a.setState({errors:o})}else{var s=a.state.errors;s.password2="Invalid Characters. Use Only: a-z, A-Z, 0-9, '_', '-'",a.setState({errors:s})}},a.onSubmit=function(e){e.preventDefault();var t={username:a.state.username,displayname:a.state.displayname.trim(),email:a.state.email.trim(),password:a.state.password.trim(),password2:a.state.password2.trim(),city:a.state.city.trim(),stateName:a.state.stateName.trim()};console.log(t),a.state.profilePic.length>0&&(t.profilePic=a.state.profilePic),a.props.registerUser(t,a.props.history).then(function(e){a.setState({modalState:"show-modal",message:e.data})}).catch(function(e){a.setState({errors:e.response.data})})},a.closeModal=function(e){"closeme"===e.target.id&&(e.preventDefault(),a.setState({modalState:"hide-modal"}),a.props.history.push("/login"))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"register"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h1",{className:"display-4 text-center font-weight-bold white"},"Sign Up"),r.a.createElement("p",{className:"lead text-center"},"Create your Cool Hands account"),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement(X,{placeholder:"Username",name:"username",type:"name",value:this.state.username,onChange:this.onChange,error:e.username}),r.a.createElement(X,{placeholder:"Display Name",name:"displayname",type:"name",value:this.state.displayname,onChange:this.onChange,error:e.displayname}),r.a.createElement(X,{placeholder:"Email Address",name:"email",type:"email",value:this.state.email,onChange:this.onChange,error:e.email}),r.a.createElement(X,{placeholder:"Profile Pic",name:"profilePic",type:"",value:this.state.profilePic,onChange:this.onChange,error:e.profilePic}),r.a.createElement(X,{placeholder:"City",name:"city",type:"",value:this.state.city,onChange:this.onChange,error:e.city}),r.a.createElement(X,{placeholder:"State",name:"stateName",type:"",value:this.state.stateName,onChange:this.onChange,error:e.stateName}),r.a.createElement(X,{placeholder:"Password",name:"password",type:"password",value:this.state.password,onChange:this.onChange,error:e.password}),r.a.createElement(X,{placeholder:"Confirm Password",name:"password2",type:"password",value:this.state.password2,onChange:this.onChange,error:e.password2}),r.a.createElement("input",{type:"submit",className:"btn btn-info btn-block mt-4"})))))),r.a.createElement("div",{id:"modal",className:this.state.modalState,onClick:this.closeModal},r.a.createElement("div",{id:"portfolioscreen",className:"modal-content"},r.a.createElement("div",null,r.a.createElement("h2",{className:"message"},this.state.message)),r.a.createElement("button",{id:"closeme",className:"btn btn-outline-danger closebtn",onClick:this.closeModal},"Close"))))}}]),t}(n.Component),q=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(t){return w.a.post("/api/users/register",e)}}})(Object(p.f)(V)),J=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",email:"",password:"",errors:{}},a.onChange=function(e){e.preventDefault(),a.setState(Object(z.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t={email:a.state.email,password:a.state.password};a.props.loginUser(t)},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h1",{className:"display-4 text-center font-weight-bold white"},"Log In"),r.a.createElement("p",{className:"lead text-center"},"Sign in to your Cool Hands account"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(X,{placeholder:"Email Address",name:"email",type:"email",value:this.state.email,onChange:this.onChange,error:e.email}),r.a.createElement(X,{placeholder:"Password",name:"password",type:"password",value:this.state.password,onChange:this.onChange,error:e.password}),r.a.createElement("input",{type:"submit",className:"btn btn-info btn-block mt-4"}))))))}}]),t}(n.Component),W=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){w.a.post("/api/users/login",e).then(function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),b(a);var n=v()(a);t(P(n))}).catch(function(e){return t({type:"GET_ERRORS",payload:e.response.data})})}}})(J),B=a(4);function K(e){var t=e.fluid,a=e.children;return r.a.createElement("div",{className:"container".concat(t?"-fluid":"")},a)}function Q(e){var t=e.fluid,a=e.children;return r.a.createElement("div",{className:"row".concat(t?"-fluid":"")},a)}function Y(e){var t=e.size,a=e.children;return r.a.createElement("div",{className:t.split(" ").map(function(e){return"col-"+e}).join(" ")},a)}var ee=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).findFollowers=function(){var e={FollowingId:a.props.auth.user.id};$.getfollowers(e).then(function(e){var t=e.data.length;a.setState({followers:e.data,numfollowers:t})}).catch(function(e){return console.log(e)})},a.findFollowing=function(){var e={FollowerId:a.props.auth.user.id};$.getfollowers(e).then(function(e){var t=e.data.length;a.setState({followers:e.data,numfollowing:t})}).catch(function(e){return console.log(e)})},a.getReviews=function(){var e=a.props.auth.user;$.getReviews({UserId:e.id}).then(function(e){for(var t in e.data)e.data[t].className="deletebtn",e.data[t].editClass="editbtn";a.setState({yourReviews:e.data})}).catch(function(e){return console.log(e)})},a.deleteReview=function(e){e.preventDefault();var t=e.target.getAttribute("reviewid");a.setState({deleteContentClass:"modal-content-delete showContent",modalState:"show-modal",reviewID:t})},a.confirmDelete=function(e){e.preventDefault(),$.deleteReview(a.state.reviewID).then(function(){a.setState({yourReviews:[],modalState:"hide-modal",editContentClass:"modal-content-edit d-none",deleteContentClass:"modal-content-delete d-none"}),a.getReviews()})},a.getReviewCount=function(){var e=a.props.auth.user;$.getReviews({UserId:e.id}).then(function(e){a.setState({numReviews:e.data.length})}).catch(function(e){return console.log(e)})},a.getFeed=function(){$.getfollowers({FollowerId:a.props.auth.user.id}).then(function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var s,l=e.data[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var i=s.value;t.push(i.FollowingId)}}catch(c){r=!0,o=c}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}a.findReviewsofFollowers(t)}).catch(function(e){return console.log(e)})},a.findReviewsofFollowers=function(e){$.getReviews({UserId:{$in:e}}).then(function(e){for(var t in e.data)e.data[t].className="d-none",e.data[t].editClass="d-none";a.setState({yourReviews:e.data})})},a.editReview=function(e){e.preventDefault();var t=e.target.getAttribute("reviewid");$.getReviews({_id:t}).then(function(e){a.setState({thisReview:e.data[0],modalState:"show-modal",editContentClass:"modal-content-edit showContent"})})},a.closeModal=function(e){"undefined"!==typeof e&&e.preventDefault(),a.setState({modalState:"hide-modal",editContentClass:"modal-content-edit d-none",deleteContentClass:"modal-content-delete d-none"}),a.getReviews()},a.handleSwitchToReviews=function(){a.handleSwitch(),a.getReviews()},a.handleSwitchToFeed=function(){a.handleSwitch(),a.getFeed()},a.state={switch:!0,reviews:[],yourReviews:[],followers:[{}],numfollowing:"",numfollowers:"",rating:0,comment:"",numReviews:"",thisReview:{},modalState:"hide-modal",editContentClass:"modal-content-edit d-none",deleteContentClass:"modal-content-delete d-none"},a.handleSwitch=a.handleSwitch.bind(Object(B.a)(Object(B.a)(a))),a.findFollowers=a.findFollowers.bind(Object(B.a)(Object(B.a)(a))),a.findFollowing=a.findFollowing.bind(Object(B.a)(Object(B.a)(a))),a.getReviews=a.getReviews.bind(Object(B.a)(Object(B.a)(a))),a.closeModal=a.closeModal.bind(Object(B.a)(Object(B.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getCurrentProfile(),this.findFollowers(),this.findFollowing(),this.getReviewCount(),this.getFeed()}},{key:"handleSwitch",value:function(){this.setState(function(e){return{switch:!e.switch}})}},{key:"render",value:function(){var e=this.props.auth.user;return r.a.createElement("div",{className:"page-h"},r.a.createElement(K,null,r.a.createElement(Q,null,r.a.createElement(Y,{size:"md-12"},r.a.createElement("img",{className:"profile-pic img-responsive m-3",src:e.profilePic||"https://picsum.photos/250/?random",alt:"Profile"})))))}}]),t}(n.Component),te=Object(h.b)(function(e){return{profile:e.profile,auth:e.auth}},{getCurrentProfile:function(){return function(e){e(A())}}})(ee);a(79);if(localStorage.jwtToken){b(localStorage.jwtToken);var ae=v()(localStorage.jwtToken);_.dispatch(P(ae));var ne=Date.now()/1e3;ae.exp<ne&&(_.dispatch(U()),_.dispatch({type:"CLEAR_CURRENT_PROFILE"}),window.location.href="/login")}var re=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{store:_},r.a.createElement(m.a,null,r.a.createElement("div",{className:"App page-b"},r.a.createElement("div",{className:"dark-overlay"},r.a.createElement(M,null),r.a.createElement("div",{className:"container page-h"},r.a.createElement(p.b,{exact:!0,path:"/",component:L}),r.a.createElement(p.b,{exact:!0,path:"/register",component:q}),r.a.createElement(p.b,{exact:!0,path:"/login",component:W}),r.a.createElement(p.d,null,r.a.createElement(D,{path:"/dashboard",component:te})))))))}}]),t}(n.Component);s.a.render(r.a.createElement(re,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.1111ca28.chunk.js.map